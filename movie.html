<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="row container text-center">
        <div class="col-4"></div>
        <div class="col-4 p-4 rounded shadow p-3 mb-5 bg-body-tertiary" style="margin-top: 200px; margin-left: 80px; border: 2px solid;">
            <h1 class="text-center text-secondary">Movie Searcher</h1>
            <input type="text" placeholder="Enter the movie name" class="form-control mt-5" id="moviename">
            <button class="btn btn-info mt-3" onclick="searchMovie()">Check</button>
        </div>
        <div id="result">

        </div>
        <div class="col-4"></div>
    </div>
</body>
<script>
 function searchMovie() {
            const movieName = document.getElementById("moviename").value;

            // Check if the user has entered a movie name
            if (movieName === "") {
                alert("Please enter a movie name!");
                return;
            }

            // Fetch movie data from the local JSON file
            fetch('moviename.json')
                .then(res => {
                    if (!res.ok) {
                        throw new Error('Failed to fetch movie details');
                    }
                    return res.json();
                })
                .then(data => {
                    console.log(data);  // Log the data for debugging
                    const foundMovies = data.filter(movie => movie.title.toLowerCase().includes(movieName.toLowerCase()));
                    if (foundMovies.length === 0) {
                        alert('No movies found!');
                    } else {
                        displayMovieData(foundMovies);
                    }
                })
                .catch(error => {
                    alert('Failed to fetch movie details: ' + error.message);
                });
        }

        function displayMovieData(movies) {
            if (!movies || movies.length === 0) {
                alert("No movies found!");
                return;
            }

            // Display the list of movies
            let htmlData = '';
            movies.forEach(movie => {
                const poster = movie.image || "https://via.placeholder.com/300";
                const title = movie.title || 'Unknown Title';
                const year = movie.year || 'Unknown Year';

                htmlData += `
                    <div class="card mb-3 container text-center" style="width:430px;margin-left:500px">
                        <img src="${poster}" alt="Movie Poster" class=" p-3" style="height:500px;width:400px"/>
                        <h2><u>${title}</u></h2>
                        <p style="text-align:justify" class="p-2">${movie.description}</p>
                        <div class="container text-start">
                        <p><strong>Year:</strong> ${year}</p>
                        <p class="text-success"><strong>Rating:</strong> ${movie.rating}</p>
                        <p><strong>Genre:</strong> ${movie.genre}</p>
</div>
                    </div>`;
            });
            console.log(movies,"help");
            result.innerHTML = htmlData;
        }
    </script>
</script>
</html>